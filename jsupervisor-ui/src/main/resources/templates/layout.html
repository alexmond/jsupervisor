<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header(${title})}"></head>
<body>
<header>
    <div th:replace="~{fragments/navbar :: navbar}"></div>
</header>
<main>
    <div th:replace="~{${content}}"></div>
</main>
<footer th:replace="~{fragments/footer :: footer}"></footer>

<script>
    function setBsTheme(theme) {
        document.documentElement.setAttribute("data-bs-theme", theme);
        localStorage.setItem("bsTheme", theme);
        const icon = document.getElementById("themeIcon");
        if (icon) {
            if (theme === 'dark') {
                icon.classList.remove('bi-sun-fill');
                icon.classList.add('bi-moon-stars-fill');
            } else {
                icon.classList.remove('bi-moon-stars-fill');
                icon.classList.add('bi-sun-fill');
            }
        }
    }

    document.addEventListener("DOMContentLoaded", function() {
        const switcher = document.getElementById("themeSwitch");
        const storedTheme = localStorage.getItem("bsTheme") || "dark";
        setBsTheme(storedTheme);
        if (switcher) {
            switcher.checked = storedTheme === "light";
            switcher.addEventListener("change", function() {
                setBsTheme(this.checked ? "light" : "dark");
            });
        }
    });
</script>
</body>
</html>